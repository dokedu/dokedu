"""
The @defer directive may be specified on a fragment spread to imply de-prioritization, that causes the fragment to be omitted in the initial response, and delivered as a subsequent response afterward. A query with @defer directive will cause the request to potentially return multiple responses, where non-deferred data is delivered in the initial response and data deferred delivered in a subsequent response. @include and @skip take precedence over @defer.
"""
directive @defer(if: Boolean = true, label: String) on FRAGMENT_SPREAD | INLINE_FRAGMENT

directive @goField(forceResolver: Boolean, name: String) on FIELD_DEFINITION | INPUT_FIELD_DEFINITION

directive @goModel(forceGenerate: Boolean, model: String, models: [String!]) on ENUM | INPUT_OBJECT | INTERFACE | OBJECT | SCALAR | UNION

directive @goTag(key: String!, value: String) on FIELD_DEFINITION | INPUT_FIELD_DEFINITION

input AddEventCompetenceInput {
  competenceId: ID!
  eventId: ID!
}

type Bucket {
  createdAt: Time!
  deletedAt: Time
  files: [File!]!
  id: ID! @deprecated
  name: String!
  shared: Boolean!
  user: User!
}

type Competence {
  color: String!
  competences(search: String, sort: CompetenceSort): [Competence]!
  createdAt: Time!
  grades: [Int!]!
  id: ID!
  name: String!
  parents: [Competence!]!
  sortOrder: Int!
  tendency(userId: ID!): CompetenceTendency
  type: CompetenceType!
  userCompetences(userId: ID): [UserCompetence]!
}

type CompetenceConnection {
  edges: [Competence]
  pageInfo: PageInfo!
  totalCount: Int!
}

input CompetenceFilterInput {
  parents: [ID]
  type: [CompetenceType]
  userId: ID
}

input CompetenceSort {
  field: CompetenceSortField!
  order: SortDirection!
}

enum CompetenceSortField {
  created_at
  name
  sort_order
}

type CompetenceTendency {
  countChildCompetences: Int!
  countLearnedCompetences: Int!
  tendency: Float!
}

enum CompetenceType {
  competence
  group
  subject
}

input CreateCompetenceInput {
  name: String!
  parentId: ID!
}

input CreateEntryCompetenceInput {
  competenceId: ID!
  entryId: ID!
}

input CreateEntryEventInput {
  entryId: ID!
  eventId: ID!
}

input CreateEntryFileInput {
  entryId: ID!
  fileId: ID!
}

input CreateEntryTagInput {
  entryId: ID!
  tagId: ID!
}

input CreateEntryUserInput {
  entryId: ID!
  userId: ID!
}

input CreateEventInput {
  body: String
  endsAt: String
  image: Upload
  recurrence: [String]
  startsAt: String
  title: String!
}

input CreateReportInput {
  allUsers: Boolean
  filterTags: [ID!]!
  format: ReportFormat!
  from: Time!
  kind: ReportKind!
  studentUser: ID
  to: Time!
}

input CreateSchoolYearInput {
  year: Int!
}

input CreateStudentInput {
  birthday: Time
  emoji: String
  firstName: String!
  grade: Int!
  joinedAt: Time
  lastName: String!
  leftAt: Time
}

input CreateSubjectInput {
  name: String!
}

input CreateTagInput {
  color: String!
  name: String!
}

input CreateUserCompetenceInput {
  competenceId: ID!
  level: Int!
  userId: ID!
}

input CreateUserInput {
  birthday: Time
  email: String!
  firstName: String!
  joinedAt: Time
  lastName: String!
  leftAt: Time
  role: UserRole!
}

input CreateUserStudentGradesInput {
  grade: Int!
  schoolYear: ID!
  student: ID!
  subject: ID!
}

input DeleteEntryCompetenceInput {
  competenceId: ID!
  entryId: ID!
}

input DeleteEntryEventInput {
  entryId: ID!
  eventId: ID!
}

input DeleteEntryFileInput {
  entryId: ID!
  fileId: ID!
}

input DeleteEntryTagInput {
  entryId: ID!
  tagId: ID!
}

input DeleteEntryUserInput {
  entryId: ID!
  userId: ID!
}

input DeleteFileInput {
  id: ID!
}

type DeleteFilePayload {
  file: File!
  success: Boolean!
}

input DeleteFilesInput {
  ids: [ID!]!
}

input DownloadFileInput {
  id: ID!
}

type DownloadFilePayload {
  url: String!
}

input DownloadFilesInput {
  ids: [ID!]!
}

type DownloadFilesPayload {
  """The url to download a zip file containing all the files."""
  url: String!
}

type Entry {
  body: String
  createdAt: Time!
  date: String!
  deletedAt: Time
  events: [Event!]!
  files: [File!]!
  id: ID!
  subjects: [Competence!]!
  tags: [Tag!]!
  user: User!
  userCompetences: [UserCompetence!]!
  users: [User!]!
}

type EntryConnection {
  edges: [Entry!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

input EntryFilterInput {
  authors: [ID]
  competences: [ID]
  deleted: Boolean
  from: Time
  tags: [ID]
  to: Time
  users: [ID]
}

enum EntrySortBy {
  createdAt_ASC
  createdAt_DESC
  date_ASC
  date_DESC
}

type Event {
  body: String
  competences: [Competence!]!
  createdAt: Time!
  deletedAt: Time
  endsAt: Time!
  id: ID!
  image: File
  recurrence: [String]
  startsAt: Time!
  title: String!
}

type EventConnection {
  edges: [Event]
  pageInfo: PageInfo!
  totalCount: Int!
}

input EventFilterInput {
  deleted: Boolean
  from: Time
  to: Time
}

enum EventOrderBy {
  endsAt_ASC
  endsAt_DESC
  startsAt_ASC
  startsAt_DESC
}

input ExportEventsInput {
  deleted: Boolean!
  from: String!
  to: String!
}

type ExportEventsPayload {
  body: String!
  endsAt: String!
  id: ID!
  startsAt: String!
  subjects: String!
  title: String!
}

type File {
  MIMEType: String!
  bucket: Bucket! @deprecated
  createdAt: Time!
  deletedAt: Time
  fileType: FileType! @deprecated
  files: [File!]! @deprecated
  id: ID!
  name: String!
  parent: File @deprecated
  parents: [File!]! @deprecated
  size: Int!
}

enum FileType {
  blob
  folder
}

input FileUploadInput {
  """
  The shared drive to upload the file to if empty the file will be uploaded to the root folder of the user.
  """
  bucketId: ID
  file: Upload!

  """
  The folder to upload the file to if empty the file will be uploaded to the root folder of the user.
  """
  parentId: ID
}

input FilesFilterInput {
  bucketId: String
  myBucket: Boolean
  parentId: String
}

input ForgotPasswordInput {
  email: String!
}

type ForgotPasswordPayload {
  success: Boolean!
}

input GenerateFileURLInput {
  id: ID!
}

enum ImportStudentsError {
  DATA_WRONG
  FORMAT_WRONG
  GRADE_WRONG
  HEADER_WRONG
  PERMISSION_DENIED
}

input ImportStudentsInput {
  file: Upload!
}

type ImportStudentsPayload {
  errors: [ImportStudentsError!]!
  usersCreated: Int!
  usersExisted: Int!
}

type InviteDetailsPayload {
  email: String!
  firstName: String!
  lastName: String!
}

type Mutation {
  acceptInvite(input: SignUpInput!, token: String!): SignInPayload! @deprecated
  archiveEntry(id: ID!): Entry!
  archiveEvent(id: ID!): Event!
  archiveTag(id: ID!): Tag!
  archiveUser(id: ID!): User!
  archiveUserCompetence(id: ID!): UserCompetence! @deprecated
  createCompetence(input: CreateCompetenceInput!): Competence!
  createEntry: Entry!
  createEntryCompetence(input: CreateEntryCompetenceInput!): Entry!
  createEntryEvent(input: CreateEntryEventInput!): Entry!
  createEntryFile(input: CreateEntryFileInput!): Entry!
  createEntryTag(input: CreateEntryTagInput!): Entry!
  createEntryUser(input: CreateEntryUserInput!): Entry!
  createEvent(input: CreateEventInput!): Event!
  createReport(input: CreateReportInput!): [Report]!
  createSchoolYear(input: CreateSchoolYearInput!): SchoolYear!
  createStudent(input: CreateStudentInput!): User!
  createSubject(input: CreateSubjectInput!): Subject!
  createTag(input: CreateTagInput!): Tag!
  createUser(input: CreateUserInput!): User!
  createUserCompetence(input: CreateUserCompetenceInput!): UserCompetence!
  deleteEntryCompetence(input: DeleteEntryCompetenceInput!): Entry!
  deleteEntryEvent(input: DeleteEntryEventInput!): Entry!
  deleteEntryFile(input: DeleteEntryFileInput!): Entry!
  deleteEntryTag(input: DeleteEntryTagInput!): Entry!
  deleteEntryUser(input: DeleteEntryUserInput!): Entry!
  deleteFile(input: DeleteFileInput!): DeleteFilePayload! @deprecated
  deleteSchoolYear(id: ID!): SchoolYear!
  deleteSubject(id: ID!): Subject!
  forgotPassword(input: ForgotPasswordInput!): ForgotPasswordPayload!
  importStudents(input: ImportStudentsInput!): ImportStudentsPayload!
  previewFile(input: PreviewFileInput!): PreviewFilePayload! @deprecated
  removeFileFromEntry(entryId: ID!, fileId: ID!): File!
  resetPassword(input: ResetPasswordInput!): ResetPasswordPayload!
  sendUserInvite(id: ID!): Boolean!
  setUserAttendanceState(date: Time!, state: UserAttendanceState!, userId: ID!): UserAttendance!
  signIn(input: SignInInput!): SignInPayload!
  signOut: Boolean!
  toggleEventCompetence(input: AddEventCompetenceInput!): Event!
  updateCompetence(input: UpdateCompetenceInput!): Competence!
  updateCompetenceSorting(input: UpdateCompetenceSortingInput!): [Competence]!
  updateDailyAttendance(date: Time!, state: UserAttendanceState!): [UserAttendance!]!
  updateEntry(input: UpdateEntryInput!): Entry!
  updateEntryUserCompetenceLevel(input: UpdateEntryUserCompetenceLevel!): Entry!
  updateEvent(input: UpdateEventInput!): Event!
  updateOrganisation(input: UpdateOrganisationInput!): Organisation!
  updatePassword(newPassword: String!, oldPassword: String!): Boolean! @deprecated
  updateSchoolYear(input: UpdateSchoolYearInput!): SchoolYear!
  updateSubject(input: UpdateSubjectInput!): Subject!
  updateTag(id: ID!, input: CreateTagInput!): Tag!
  updateUser(input: UpdateUserInput!): User!
  updateUserLanguage(language: UserLanguage!): User!
  updateUserStudentGrade(input: UpdateUserStudentGradesInput!): UserStudentGrades!
  uploadFile(input: FileUploadInput!): File! @deprecated
  uploadFileToEntry(entryId: ID!, file: Upload!): Entry!
}

type Organisation {
  id: ID!
  legalName: String!
  name: String!
  owner: User!
  phone: String
  website: String
}

type PageInfo {
  currentPage: Int!
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
}

input PreviewFileInput {
  id: ID!
}

type PreviewFilePayload {
  url: String!
}

type Query {
  competence(id: ID!): Competence!
  competences(filter: CompetenceFilterInput, limit: Int, offset: Int, search: String, sort: CompetenceSort): CompetenceConnection!
  entries(filter: EntryFilterInput, limit: Int, offset: Int, search: String, sortBy: EntrySortBy): EntryConnection!
  entry(id: ID!): Entry!
  event(id: ID!): Event!
  events(filter: EventFilterInput, limit: Int, offset: Int, order: EventOrderBy, search: String): EventConnection!
  exportEvents(input: ExportEventsInput!): [ExportEventsPayload]!
  file(id: ID!): File!
  inviteDetails(token: String!): InviteDetailsPayload!
  me: User!
  organisation: Organisation
  report(id: ID!): Report!
  reports(limit: Int, offset: Int): ReportConnection!
  schoolYear(id: ID!): SchoolYear!
  schoolYears(limit: Int, offset: Int): SchoolYearConnection!
  subject(id: ID!): Subject!
  subjects(limit: Int, offset: Int): SubjectConnection!
  tag(id: ID!): Tag!
  tags(limit: Int, offset: Int, search: String): TagConnection!
  user(id: ID!): User!
  userAttendanceOverview(date: Time!): [UserAttendance!]!
  userStudent(id: ID!): UserStudent!
  userStudentGrade(id: ID!): UserStudentGrades!
  userStudentGrades(limit: Int, offset: Int): UserStudentGradesConnection!
  userStudents(limit: Int, offset: Int): UserStudentConnection!
  users(filter: UserFilterInput, limit: Int, offset: Int, search: String): UserConnection!
}

type Report {
  createdAt: Time!
  deletedAt: Time
  file: File
  filterTags: [ID!]!
  format: ReportFormat!
  from: Time!
  id: ID!
  kind: ReportKind!
  meta: String!
  status: ReportStatus!
  studentUser: User!
  to: Time!
  user: User!
}

type ReportConnection {
  edges: [Report]
  pageInfo: PageInfo!
  totalCount: Int!
}

enum ReportFormat {
  docx
  pdf
}

enum ReportKind {
  all_entries
  competences
  entries
  learned_competences
  subjects
}

enum ReportStatus {
  done
  error
  pending
  processing
}

input ResetPasswordInput {
  password: String!
  token: String
}

type ResetPasswordPayload {
  invalidToken: Boolean!
  success: Boolean!
  tokenExpired: Boolean!
  unableToReset: Boolean!
  unauthorized: Boolean!
}

type SchoolYear {
  description: String!
  id: ID!
  year: Int!
}

type SchoolYearConnection {
  edges: [SchoolYear!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

input SignInInput {
  email: String!
  password: String!
}

type SignInPayload {
  enabled_apps: [String!]! @deprecated
  language: String!
  setupComplete: Boolean!
  token: String!
  user: User!
}

input SignUpInput {
  email: String!
  firstName: String!
  lastName: String!
  password: String!
}

input SortCompetenceInput {
  id: ID!
  sortOrder: Int!
}

enum SortDirection {
  asc
  desc
}

type Subject {
  id: ID!
  name: String!
}

type SubjectConnection {
  edges: [Subject!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type Subscription {
  reportCreatedOrUpdated: Report! @deprecated
}

type Tag {
  color: String!
  createdAt: Time!
  deletedAt: Time
  id: ID!
  name: String!
}

type TagConnection {
  edges: [Tag]
  pageInfo: PageInfo!
  totalCount: Int!
}

scalar Time

input UpdateCompetenceInput {
  color: String
  id: ID!
}

input UpdateCompetenceSortingInput {
  competences: [SortCompetenceInput!]!
}

input UpdateEntryInput {
  body: String
  date: String
  id: ID!
}

input UpdateEntryUserCompetenceLevel {
  competenceId: ID!
  entryId: ID!
  level: Int!
}

input UpdateEventInput {
  body: String
  endsAt: String
  id: ID!
  image: Upload
  recurrence: [String]
  startsAt: String
  title: String
}

input UpdateOrganisationInput {
  id: ID!
  legalName: String
  name: String
  phone: String
  website: String
}

input UpdateSchoolYearInput {
  id: ID!
  year: Int!
}

input UpdateSubjectInput {
  id: ID!
  name: String!
}

input UpdateUserCompetenceInput {
  competenceId: ID!
  level: Int!
  userId: ID!
}

input UpdateUserInput {
  birthday: Time
  email: String
  emoji: String
  firstName: String!
  grade: Int
  id: ID!
  joinedAt: Time
  lastName: String!
  leftAt: Time
  missedHours: Int
  missedHoursExcused: Int
}

input UpdateUserStudentGradesInput {
  grade: Int!
  id: ID!
}

scalar Upload

type User {
  createdAt: Time!
  deletedAt: Time
  email: String
  firstName: String!
  id: ID!
  inviteAccepted: Boolean!
  language: UserLanguage
  lastName: String!
  lastSeenAt: Time @deprecated
  organisationId: ID!
  role: UserRole!
  student: UserStudent
}

type UserAttendance {
  date: Time!
  id: ID!
  state: UserAttendanceState!
  user: User!
}

enum UserAttendanceState {
  ABSENT
  LATE
  PRESENT
  SICK
  UNKNOWN
}

type UserCompetence {
  competence: Competence!
  createdAt: Time!
  createdBy: User
  entry: Entry
  id: ID!
  level: Int!
  user: User!
}

type UserCompetenceConnection {
  edges: [UserCompetence]
  pageInfo: PageInfo!
  totalCount: Int!
}

input UserCompetenceFilterInput {
  competenceID: ID
  userID: ID
}

type UserConnection {
  edges: [User]
  pageInfo: PageInfo!
  totalCount: Int!
}

input UserFilterInput {
  orderBy: UserOrderBy
  role: [UserRole]
  showDeleted: Boolean
}

enum UserLanguage {
  de
  en
}

enum UserOrderBy {
  firstNameAsc
  firstNameDesc
  lastNameAsc
  lastNameDesc
}

enum UserRole {
  admin
  educator
  owner
  parent
  student
  teacher
}

type UserStudent {
  birthday: Time
  comments: String
  competencesCount: Int!
  createdAt: Time!
  deletedAt: Time
  emoji: String
  entriesCount: Int!
  eventsCount: Int!
  grade: Int!
  id: ID!
  joinedAt: Time
  leftAt: Time
  missedHours: Int!
  missedHoursExcused: Int!
  nationality: String
  user: User!
}

type UserStudentConnection {
  edges: [UserStudent]
  pageInfo: PageInfo!
  totalCount: Int!
}

type UserStudentGrades {
  grade: Int!
  id: ID!
  schoolYear: SchoolYear!
  student: UserStudent!
  subject: Subject!
}

type UserStudentGradesConnection {
  edges: [UserStudentGrades!]!
  pageInfo: PageInfo!
  totalCount: Int!
}